(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{287:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2240:(e,t,s)=>{Promise.resolve().then(s.bind(s,5543))},4999:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},5543:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(8307),r=s(3603),l=s(5803),o=s.n(l),i=s(3158),n=s(9763),c=s(8370),d=s(4999),h=s(287),u=s(292),m=s(9889);let x=c.Ik({email:c.Yj().email("Email inv\xe1lido"),password:c.Yj().min(1,"Senha \xe9 obrigat\xf3ria"),rememberMe:c.zM().optional()}),p="http://localhost:3001";function f(){let{login:e}=(0,m.A)(),[t,s]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),{register:f,handleSubmit:b,formState:{errors:j,isSubmitting:w}}=(0,i.mN)({resolver:(0,n.u)(x),defaultValues:{rememberMe:!1}}),g=async t=>{s(null);try{await e(t.email,t.password)}catch(e){s(e instanceof Error?e.message:"Erro ao fazer login")}};return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Bem-vindo"}),(0,a.jsxs)("p",{className:"text-[#B0B0B0]",children:["Tecnologia para maximizar",(0,a.jsx)("br",{}),"resultados."]})]}),t&&(0,a.jsx)("div",{className:"mb-6 rounded-lg bg-[#FF6B6B]/10 border border-[#FF6B6B]/30 p-4 text-sm text-[#FF6B6B]",children:t}),(0,a.jsxs)("form",{onSubmit:b(g),className:"space-y-5",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:"Endere\xe7o de E-mail"}),(0,a.jsx)("input",{id:"email",type:"email",autoComplete:"email",className:"w-full h-12 rounded-lg border border-[#16213E] bg-[#16213E] px-4 text-white placeholder:text-[#666] focus:outline-none focus:border-[#00E4F2] focus:ring-1 focus:ring-[#00E4F2] transition-all",placeholder:"Endere\xe7o de E-mail",...f("email")}),j.email&&(0,a.jsx)("p",{className:"text-sm text-[#FF6B6B]",children:j.email.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:"Senha"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"password",type:l?"text":"password",autoComplete:"current-password",className:"w-full h-12 rounded-lg border border-[#16213E] bg-[#16213E] px-4 pr-12 text-white placeholder:text-[#666] focus:outline-none focus:border-[#00E4F2] focus:ring-1 focus:ring-[#00E4F2] transition-all",placeholder:"Digite sua senha",...f("password")}),(0,a.jsx)("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#666] hover:text-white transition-colors",children:l?(0,a.jsx)(d.A,{className:"h-5 w-5"}):(0,a.jsx)(h.A,{className:"h-5 w-5"})})]}),j.password&&(0,a.jsx)("p",{className:"text-sm text-[#FF6B6B]",children:j.password.message})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"rememberMe",className:"h-4 w-4 rounded border-[#16213E] bg-[#16213E] text-[#00E4F2] focus:ring-[#00E4F2] focus:ring-offset-0",...f("rememberMe")}),(0,a.jsx)("label",{htmlFor:"rememberMe",className:"text-sm text-[#B0B0B0]",children:"Lembrar de mim"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>{window.location.href="".concat(p,"/api/v1/auth/google")},className:"w-full h-12 rounded-lg btn-gradient text-white font-semibold flex items-center justify-center gap-3 hover:opacity-90 transition-all",children:[(0,a.jsxs)("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar com Google"]}),(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-[#16213E]"})}),(0,a.jsx)("span",{className:"relative bg-gradient-to-r from-[#1A1A2E] via-[#1A1A2E] to-[#1A1A2E] px-4 text-sm text-[#B0B0B0]",children:"ou continue com"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>{window.location.href="".concat(p,"/api/v1/auth/microsoft")},className:"w-full h-12 rounded-lg border border-[#16213E] bg-[#16213E] text-white font-semibold flex items-center justify-center gap-3 hover:bg-[#1a2744] transition-all",children:[(0,a.jsxs)("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"#F25022",d:"M1 1h10v10H1z"}),(0,a.jsx)("path",{fill:"#00A4EF",d:"M1 13h10v10H1z"}),(0,a.jsx)("path",{fill:"#7FBA00",d:"M13 1h10v10H13z"}),(0,a.jsx)("path",{fill:"#FFB900",d:"M13 13h10v10H13z"})]}),"Continuar com Microsoft"]}),(0,a.jsx)("button",{type:"submit",disabled:w,className:"w-full h-12 rounded-lg bg-[#16213E] border border-[#00E4F2]/30 text-white font-semibold flex items-center justify-center gap-2 hover:border-[#00E4F2] hover:bg-[#16213E]/80 transition-all disabled:opacity-50",children:w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-5 w-5 animate-spin"}),"Entrando..."]}):"Entrar com Email"})]}),(0,a.jsxs)("p",{className:"mt-8 text-center text-sm text-[#B0B0B0]",children:["N\xe3o tem uma conta?"," ",(0,a.jsx)(o(),{href:"/register",className:"font-medium text-[#00E4F2] hover:underline",children:"Cadastre-se"})]})]})}},9889:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,O:()=>c});var a=s(8307),r=s(3603),l=s(4844);let o=(0,r.createContext)(void 0),i="http://localhost:3001",n="trackpro_auth";function c(e){let{children:t}=e,[s,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(!0),u=(0,l.useRouter)(),m=()=>{let e=localStorage.getItem(n);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},x=e=>{let t={accessToken:e.accessToken,refreshToken:e.refreshToken,expiresAt:Date.now()+1e3*e.expiresIn};localStorage.setItem(n,JSON.stringify(t))},p=()=>{localStorage.removeItem(n)},f=(0,r.useCallback)(async e=>{try{let t=await fetch("".concat(i,"/api/v1/users/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)return null;return t.json()}catch(e){return null}},[]),b=(0,r.useCallback)(async()=>{let e=m();if(!e){c(null),h(!1);return}if(e.expiresAt<Date.now()+6e4)try{let t=await fetch("".concat(i,"/api/v1/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e.refreshToken})});if(!t.ok){p(),c(null),h(!1);return}let s=await t.json();x(s),e.accessToken=s.accessToken}catch(e){p(),c(null),h(!1);return}c(await f(e.accessToken)),h(!1)},[f]);(0,r.useEffect)(()=>{b()},[b]);let j=async(e,t)=>{let s=await fetch("".concat(i,"/api/v1/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok)throw Error((await s.json()).message||"Login failed");let a=await s.json();x(a),c(await f(a.accessToken)),u.push("/projects")},w=async(e,t,s)=>{let a=await fetch("".concat(i,"/api/v1/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:s})});if(!a.ok)throw Error((await a.json()).message||"Registration failed");let r=await a.json();x(r),c(await f(r.accessToken)),u.push("/projects")},g=async()=>{let e=m();if(e)try{await fetch("".concat(i,"/api/v1/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)},body:JSON.stringify({refreshToken:e.refreshToken})})}catch(e){}p(),c(null),u.push("/login")};return(0,a.jsx)(o.Provider,{value:{user:s,isLoading:d,isAuthenticated:!!s,login:j,register:w,logout:g,refreshAuth:b},children:t})}function d(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[5803,2718,6438,2453,7358],()=>e(e.s=2240)),_N_E=e.O()}]);
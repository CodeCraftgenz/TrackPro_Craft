(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5602],{760:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3161).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1319:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3161).A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},1978:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3161).A)("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]])},2889:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3161).A)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},3411:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3161).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3686:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3161).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},4829:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3161).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},5381:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3161).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7238:(e,s,t)=>{Promise.resolve().then(t.bind(t,7636))},7636:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var a=t(8307),l=t(5384),r=t(3411),d=t(9915),c=t(9418),i=t(2889),n=t(1319),m=t(5381);let x=(0,t(3161).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var o=t(760),h=t(3686),u=t(4829),p=t(1978),g=t(5803),y=t.n(g),f=t(8061);function j(){let{get:e}=(0,f.g)(),{data:s,isLoading:t}=(0,l.I)({queryKey:["admin-stats"],queryFn:()=>e("/api/v1/admin/stats")}),{data:g,isLoading:j,refetch:N}=(0,l.I)({queryKey:["admin-queues"],queryFn:()=>e("/api/v1/admin/queues"),refetchInterval:1e4}),{data:v,isLoading:b,refetch:k}=(0,l.I)({queryKey:["health"],queryFn:()=>e("/health"),refetchInterval:3e4}),w=e=>"up"===e?(0,a.jsx)(r.A,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(d.A,{className:"h-4 w-4 text-red-500"});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Monitoramento e opera\xe7\xf5es do sistema"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)("button",{onClick:()=>{N(),k()},className:"inline-flex items-center justify-center rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent",children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Atualizar"]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(y(),{href:"/admin/queues",className:"inline-flex items-center gap-2 rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),"Filas"]}),(0,a.jsxs)(y(),{href:"/admin/audit",className:"inline-flex items-center gap-2 rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),"Audit Logs"]}),(0,a.jsxs)(y(),{href:"/admin/errors",className:"inline-flex items-center gap-2 rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),"Erros"]})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"font-semibold flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"h-5 w-5"}),"Status do Sistema"]}),v&&(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"healthy":return"text-green-600 bg-green-100 dark:bg-green-900/30";case"degraded":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/30";case"unhealthy":return"text-red-600 bg-red-100 dark:bg-red-900/30";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/30"}})(v.status)),children:v.status.toUpperCase()})]}),b?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)(c.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):v?(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Servi\xe7os"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(x,{className:"h-4 w-4"})," Database"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[w(v.services.database.status),v.services.database.latency,"ms"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"})," Redis"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[w(v.services.redis.status),v.services.redis.latency,"ms"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(x,{className:"h-4 w-4"})," ClickHouse"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[w(v.services.clickhouse.status),v.services.clickhouse.latency,"ms"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Uptime"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-xl font-semibold",children:(e=>{let s=Math.floor(e/86400),t=Math.floor(e%86400/3600),a=Math.floor(e%3600/60);return"".concat(s,"d ").concat(t,"h ").concat(a,"m")})(v.uptime)})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Vers\xe3o: ",v.version]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Mem\xf3ria"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsxs)("span",{className:"text-xl font-semibold",children:[v.memory.percentage,"%"]}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",v.memory.used,"MB / ",v.memory.total,"MB)"]})]}),(0,a.jsx)("div",{className:"h-2 w-full rounded-full bg-muted",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(v.memory.percentage>80?"bg-red-500":v.memory.percentage>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(v.memory.percentage,"%")}})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"\xdaltima verifica\xe7\xe3o"}),(0,a.jsx)("p",{className:"text-sm",children:new Date(v.timestamp).toLocaleString("pt-BR")})]})]}):null]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Usu\xe1rios"}),(0,a.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold",children:t?"-":null==s?void 0:s.users.toLocaleString("pt-BR")})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tenants"}),(0,a.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold",children:t?"-":null==s?void 0:s.tenants.toLocaleString("pt-BR")})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Projetos"}),(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold",children:t?"-":null==s?void 0:s.projects.toLocaleString("pt-BR")}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[null==s?void 0:s.activeProjects," ativos"]})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Eventos"}),(0,a.jsx)(n.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold",children:t?"-":null==s?void 0:s.totalEvents.toLocaleString("pt-BR")})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card",children:[(0,a.jsx)("div",{className:"border-b px-4 py-3",children:(0,a.jsxs)("h2",{className:"font-semibold flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-5 w-5"}),"Filas de Processamento"]})}),j?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)(c.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"border-b bg-muted/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Fila"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-muted-foreground",children:"Aguardando"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-muted-foreground",children:"Ativas"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-muted-foreground",children:"Completas"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-muted-foreground",children:"Falhas"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-muted-foreground",children:"Atrasadas"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-muted-foreground",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:null==g?void 0:g.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,a.jsx)("td",{className:"px-4 py-3 font-medium",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:e.waiting}),(0,a.jsx)("td",{className:"px-4 py-3 text-right text-blue-600",children:e.active}),(0,a.jsx)("td",{className:"px-4 py-3 text-right text-green-600",children:e.completed}),(0,a.jsx)("td",{className:"px-4 py-3 text-right text-red-600",children:e.failed}),(0,a.jsx)("td",{className:"px-4 py-3 text-right text-yellow-600",children:e.delayed}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ".concat(e.paused?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"),children:e.paused?"Pausada":"Ativa"})})]},e.name))})]})})]})]})}},8061:(e,s,t)=>{"use strict";t.d(s,{g:()=>r});var a=t(3603);let l="trackpro_auth";function r(){let e=(0,a.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=function(){let e=localStorage.getItem(l);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}(),a={"Content-Type":"application/json",...s.headers};t&&(a.Authorization="Bearer ".concat(t.accessToken));let r=await fetch("".concat("http://localhost:3001").concat(e),{...s,headers:a});if(!r.ok){let e=await r.json().catch(()=>({}));throw 401===r.status&&(localStorage.removeItem(l),window.location.pathname.includes("/login")||(window.location.href="/login")),Error(e.message||"Request failed: ".concat(r.status))}return 204===r.status?{}:r.json()},[]),s=(0,a.useCallback)(s=>e(s,{method:"GET"}),[e]),t=(0,a.useCallback)((s,t)=>e(s,{method:"POST",body:t?JSON.stringify(t):void 0}),[e]),r=(0,a.useCallback)((s,t)=>e(s,{method:"PUT",body:t?JSON.stringify(t):void 0}),[e]),d=(0,a.useCallback)((s,t)=>e(s,{method:"DELETE",body:t?JSON.stringify(t):void 0}),[e]);return{request:e,get:s,post:t,put:r,del:d}}},9418:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3161).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},9915:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(3161).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},e=>{e.O(0,[5803,2198,528,6438,2453,7358],()=>e(e.s=7238)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1250],{292:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},861:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(8307),r=s(3603),l=s(9889);class i{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:s,...a}=t,r={"Content-Type":"application/json",...a.headers};s&&(r.Authorization="Bearer ".concat(s));let l=await fetch("".concat(this.baseUrl).concat(e),{...a,headers:r});if(!l.ok){let e=await l.json().catch(()=>({}));throw new n(e.message||"An error occurred",l.status,e.code)}return 204===l.status?{}:l.json()}async get(e,t){return this.request(e,{...t,method:"GET"})}async post(e,t,s){return this.request(e,{...s,method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t,s){return this.request(e,{...s,method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t,s){return this.request(e,{...s,method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e,t){return this.request(e,{...t,method:"DELETE"})}constructor(e){this.baseUrl=e}}class n extends Error{constructor(e,t,s){super(e),this.name="ApiError",this.status=t,this.code=s}}let c=new i("http://localhost:3001");var o=s(292),d=s(3161);let u=(0,d.A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var m=s(1246);let h=(0,d.A)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),x={basic_analytics:"Basic Analytics",advanced_funnels:"Advanced Funnels",multiple_projects:"Multiple Projects",api_access:"API Access",csv_export:"CSV Export",integrations:"Third-party Integrations",custom_reports:"Custom Reports",mfa_support:"Two-Factor Authentication",audit_logs:"Audit Logs",gdpr_tools:"GDPR Compliance Tools",sso_saml:"SSO / SAML",custom_branding:"Custom Branding",sla_guarantee:"SLA Guarantee",dedicated_infrastructure:"Dedicated Infrastructure",onboarding:"Custom Onboarding",community_support:"Community Support",email_support:"Email Support",priority_support:"Priority Support",dedicated_support:"Dedicated Support"};function p(){var e;(0,l.A)();let[t,s]=(0,r.useState)([]),[i,n]=(0,r.useState)(null),[d,p]=(0,r.useState)(null),[g,y]=(0,r.useState)([]),[b,j]=(0,r.useState)(!0),[f,v]=(0,r.useState)("monthly"),[N,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{S()},[]);let S=async()=>{try{let[e,t,a,r]=await Promise.all([c.get("/api/v1/billing/plans"),c.get("/api/v1/billing/subscription").catch(()=>null),c.get("/api/v1/billing/usage").catch(()=>null),c.get("/api/v1/billing/invoices").catch(()=>[])]);s(e||[]),n(t),p(a),y(r||[])}catch(e){console.error("Failed to load billing data:",e)}finally{j(!1)}},P=async e=>{w(e);try{let t=await c.post("/api/v1/billing/checkout",{planTier:e,billingInterval:f,successUrl:"".concat(window.location.origin,"/billing?success=true"),cancelUrl:"".concat(window.location.origin,"/billing?canceled=true")});t.url&&(window.location.href=t.url)}catch(e){console.error("Failed to create checkout session:",e),alert("Failed to start checkout. Please try again.")}finally{w(null)}},A=async()=>{w("portal");try{let e=await c.post("/api/v1/billing/portal",{returnUrl:window.location.href});e.url&&(window.location.href=e.url)}catch(e){console.error("Failed to create portal session:",e),alert("Failed to open billing portal. Please try again.")}finally{w(null)}},k=async()=>{if(confirm("Are you sure you want to cancel your subscription? You will still have access until the end of your billing period.")){w("cancel");try{await c.delete("/api/v1/billing/subscription"),await S()}catch(e){console.error("Failed to cancel subscription:",e),alert("Failed to cancel subscription. Please try again.")}finally{w(null)}}},E=async()=>{w("resume");try{await c.post("/api/v1/billing/subscription/resume"),await S()}catch(e){console.error("Failed to resume subscription:",e),alert("Failed to resume subscription. Please try again.")}finally{w(null)}},C=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e/100),T=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),_=e=>{switch(e.toLowerCase()){case"active":case"succeeded":return"text-green-400";case"trialing":return"text-blue-400";case"past_due":case"failed":return"text-red-400";case"canceled":return"text-gray-400";default:return"text-yellow-400"}};if(b)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(o.A,{className:"w-8 h-8 animate-spin text-blue-500"})});let L=(null==i||null==(e=i.plan)?void 0:e.tier)||"FREE";return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Billing & Subscription"}),(0,a.jsx)("p",{className:"mt-1 text-gray-400",children:"Manage your subscription and billing details"})]}),i&&(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-5 h-5"}),"Current Subscription"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Plan"}),(0,a.jsx)("p",{className:"text-white font-medium",children:i.plan.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Status"}),(0,a.jsxs)("p",{className:"font-medium capitalize ".concat(_(i.status)),children:[i.status.replace("_"," "),i.cancelAtPeriodEnd&&" (Canceling)"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Billing Cycle"}),(0,a.jsx)("p",{className:"text-white font-medium capitalize",children:i.billingInterval})]}),i.currentPeriodEnd&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:i.cancelAtPeriodEnd?"Access Until":"Next Billing Date"}),(0,a.jsx)("p",{className:"text-white font-medium",children:T(i.currentPeriodEnd)})]}),i.trialEnd&&new Date(i.trialEnd)>new Date&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Trial Ends"}),(0,a.jsx)("p",{className:"text-blue-400 font-medium",children:T(i.trialEnd)})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,a.jsx)("button",{onClick:A,disabled:"portal"===N,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"portal"===N?(0,a.jsx)(o.A,{className:"w-4 h-4 animate-spin"}):"Manage Billing"}),i.cancelAtPeriodEnd?(0,a.jsx)("button",{onClick:E,disabled:"resume"===N,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:"resume"===N?(0,a.jsx)(o.A,{className:"w-4 h-4 animate-spin"}):"Resume Subscription"}):"FREE"!==i.plan.tier&&(0,a.jsx)("button",{onClick:k,disabled:"cancel"===N,className:"px-4 py-2 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 disabled:opacity-50",children:"cancel"===N?(0,a.jsx)(o.A,{className:"w-4 h-4 animate-spin"}):"Cancel Subscription"})]})]}),d&&(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Current Usage"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Events"}),(0,a.jsxs)("span",{className:"text-white",children:[d.eventsCount.toLocaleString()," / ",-1===d.eventsLimit?"Unlimited":d.eventsLimit.toLocaleString()]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(d.eventsPercentage>90?"bg-red-500":d.eventsPercentage>75?"bg-yellow-500":"bg-blue-500"),style:{width:"".concat(Math.min(d.eventsPercentage,100),"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Projects"}),(0,a.jsxs)("span",{className:"text-white",children:[d.projectsCount," / ",-1===d.projectsLimit?"Unlimited":d.projectsLimit]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-blue-500",style:{width:"".concat(d.projectsCount/(-1===d.projectsLimit?100:d.projectsLimit)*100,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Team Members"}),(0,a.jsxs)("span",{className:"text-white",children:[d.teamMembersCount," / ",-1===d.teamMembersLimit?"Unlimited":d.teamMembersLimit]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-blue-500",style:{width:"".concat(d.teamMembersCount/(-1===d.teamMembersLimit?100:d.teamMembersLimit)*100,"%")}})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Available Plans"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-gray-800 p-1 rounded-lg",children:[(0,a.jsx)("button",{onClick:()=>v("monthly"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("monthly"===f?"bg-blue-600 text-white":"text-gray-400 hover:text-white"),children:"Monthly"}),(0,a.jsxs)("button",{onClick:()=>v("yearly"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("yearly"===f?"bg-blue-600 text-white":"text-gray-400 hover:text-white"),children:["Yearly ",(0,a.jsx)("span",{className:"text-green-400 text-xs ml-1",children:"Save 17%"})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(e=>{let t="yearly"===f?e.yearlyPrice:e.monthlyPrice,s=e.tier===L,r="PROFESSIONAL"===e.tier;return(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 relative ".concat(r?"ring-2 ring-blue-500":""," ").concat(s?"ring-2 ring-green-500":""),children:[r&&(0,a.jsx)("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:(0,a.jsx)("span",{className:"bg-blue-600 text-white text-xs px-3 py-1 rounded-full",children:"Most Popular"})}),s&&(0,a.jsx)("div",{className:"absolute -top-3 right-4",children:(0,a.jsx)("span",{className:"bg-green-600 text-white text-xs px-3 py-1 rounded-full",children:"Current Plan"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-1 min-h-[40px]",children:e.description}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-white",children:C(t)}),(0,a.jsxs)("span",{className:"text-gray-400",children:["/","yearly"===f?"year":"month"]})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsxs)("span",{children:[-1===e.maxProjects?"Unlimited":e.maxProjects," project",1!==e.maxProjects?"s":""]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsxs)("span",{children:[-1===e.maxEventsPerMonth?"Unlimited":e.maxEventsPerMonth.toLocaleString()," events/month"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsxs)("span",{children:[-1===e.maxTeamMembers?"Unlimited":e.maxTeamMembers," team member",1!==e.maxTeamMembers?"s":""]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsxs)("span",{children:[e.retentionDays," days data retention"]})]})]}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-700 space-y-2",children:[e.features.slice(0,4).map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 text-blue-400"}),(0,a.jsx)("span",{children:x[e]||e})]},e)),e.features.length>4&&(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["+",e.features.length-4," more features"]})]}),(0,a.jsx)("button",{onClick:()=>P(e.tier),disabled:s||N===e.tier||"FREE"===e.tier,className:"mt-6 w-full py-2 px-4 rounded-lg font-medium transition-colors ".concat(s||"FREE"===e.tier?"bg-gray-700 text-gray-400 cursor-not-allowed":"ENTERPRISE"===e.tier?"bg-purple-600 text-white hover:bg-purple-700":"bg-blue-600 text-white hover:bg-blue-700"," disabled:opacity-50"),children:N===e.tier?(0,a.jsx)(o.A,{className:"w-4 h-4 animate-spin mx-auto"}):s?"Current Plan":"FREE"===e.tier?"Free Forever":"ENTERPRISE"===e.tier?"Contact Sales":"Upgrade"})]},e.id)})})]}),g.length>0&&(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(h,{className:"w-5 h-5"}),"Invoice History"]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left text-gray-400 text-sm border-b border-gray-700",children:[(0,a.jsx)("th",{className:"pb-3",children:"Date"}),(0,a.jsx)("th",{className:"pb-3",children:"Period"}),(0,a.jsx)("th",{className:"pb-3",children:"Amount"}),(0,a.jsx)("th",{className:"pb-3",children:"Status"}),(0,a.jsx)("th",{className:"pb-3",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:g.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-700/50",children:[(0,a.jsx)("td",{className:"py-3 text-white",children:T(e.createdAt)}),(0,a.jsxs)("td",{className:"py-3 text-gray-400 text-sm",children:[T(e.periodStart)," - ",T(e.periodEnd)]}),(0,a.jsx)("td",{className:"py-3 text-white",children:C(e.amountDue)}),(0,a.jsx)("td",{className:"py-3",children:(0,a.jsx)("span",{className:"capitalize ".concat(_(e.status)),children:e.status})}),(0,a.jsxs)("td",{className:"py-3",children:[e.invoiceUrl&&(0,a.jsx)("a",{href:e.invoiceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View"}),e.invoicePdf&&(0,a.jsx)("a",{href:e.invoicePdf,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm ml-3",children:"PDF"})]})]},e.id))})]})})]})]})}},1246:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},3161:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(3603);let r=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...l,width:i,height:i,stroke:s,strokeWidth:c?24*Number(n)/Number(i):n,className:r("lucide",o),...m},[...u.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),n=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{className:n,...c}=s;return(0,a.createElement)(i,{ref:l,iconNode:t,className:r("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...c})});return s.displayName="".concat(e),s}},4844:(e,t,s)=>{"use strict";var a=s(5340);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},6690:(e,t,s)=>{Promise.resolve().then(s.bind(s,861))},9889:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,O:()=>o});var a=s(8307),r=s(3603),l=s(4844);let i=(0,r.createContext)(void 0),n="http://localhost:3001",c="trackpro_auth";function o(e){let{children:t}=e,[s,o]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),m=(0,l.useRouter)(),h=()=>{let e=localStorage.getItem(c);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},x=e=>{let t={accessToken:e.accessToken,refreshToken:e.refreshToken,expiresAt:Date.now()+1e3*e.expiresIn};localStorage.setItem(c,JSON.stringify(t))},p=()=>{localStorage.removeItem(c)},g=(0,r.useCallback)(async e=>{try{let t=await fetch("".concat(n,"/api/v1/users/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)return null;return t.json()}catch(e){return null}},[]),y=(0,r.useCallback)(async()=>{let e=h();if(!e){o(null),u(!1);return}if(e.expiresAt<Date.now()+6e4)try{let t=await fetch("".concat(n,"/api/v1/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e.refreshToken})});if(!t.ok){p(),o(null),u(!1);return}let s=await t.json();x(s),e.accessToken=s.accessToken}catch(e){p(),o(null),u(!1);return}o(await g(e.accessToken)),u(!1)},[g]);(0,r.useEffect)(()=>{y()},[y]);let b=async(e,t)=>{let s=await fetch("".concat(n,"/api/v1/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok)throw Error((await s.json()).message||"Login failed");let a=await s.json();x(a),o(await g(a.accessToken)),m.push("/projects")},j=async(e,t,s)=>{let a=await fetch("".concat(n,"/api/v1/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:s})});if(!a.ok)throw Error((await a.json()).message||"Registration failed");let r=await a.json();x(r),o(await g(r.accessToken)),m.push("/projects")},f=async()=>{let e=h();if(e)try{await fetch("".concat(n,"/api/v1/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)},body:JSON.stringify({refreshToken:e.refreshToken})})}catch(e){}p(),o(null),m.push("/login")};return(0,a.jsx)(i.Provider,{value:{user:s,isLoading:d,isAuthenticated:!!s,login:b,register:j,logout:f,refreshAuth:y},children:t})}function d(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[6438,2453,7358],()=>e(e.s=6690)),_N_E=e.O()}]);
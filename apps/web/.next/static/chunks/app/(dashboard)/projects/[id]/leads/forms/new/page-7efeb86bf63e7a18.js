(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1400],{7289:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var r=s(8307),a=s(3603),l=s(4844),o=s(5384),i=s(328),d=s(5803),n=s.n(d),c=s(4734),m=s(2669),x=s(4810),h=s(9198),u=s(3123),p=s(8743),b=s(5933),w=s(8319),g=s(4172),j=s(8191),f=s(292),N=s(8166),v=s(8061);let y={text:c.A,email:m.A,phone:x.A,select:h.A,textarea:u.A},C={text:"Texto",email:"E-mail",phone:"Telefone",select:"Sele\xe7\xe3o",textarea:"Texto longo"},k={primaryColor:"#00E4F2",backgroundColor:"#1A1A2E",textColor:"#FFFFFF",buttonText:"Enviar",successMessage:"Obrigado! Entraremos em contato em breve."};function A(){var e;let t=(0,l.useParams)(),s=(0,l.useRouter)(),d=t.id,{get:c,post:m}=(0,v.g)(),[x,h]=(0,a.useState)(""),[u,A]=(0,a.useState)([{name:"name",label:"Nome",type:"text",required:!0},{name:"email",label:"E-mail",type:"email",required:!0}]),[E,F]=(0,a.useState)(k),[S,T]=(0,a.useState)(""),[O,q]=(0,a.useState)(null),[_,P]=(0,a.useState)(!1),{data:L}=(0,o.I)({queryKey:["tenants"],queryFn:()=>c("/api/v1/tenants")}),M=null==L||null==(e=L[0])?void 0:e.id,D=(0,i.n)({mutationFn:e=>m("/api/v1/tenants/".concat(M,"/projects/").concat(d,"/leads/forms"),e),onSuccess:()=>{s.push("/projects/".concat(d,"/leads/forms"))},onError:e=>{q(e.message)}}),J=(e,t)=>{let s=[...u];s[e]={...s[e],...t},A(s)},I=(e,t)=>{if("up"===t&&0===e||"down"===t&&e===u.length-1)return;let s=[...u],r="up"===t?e-1:e+1;[s[e],s[r]]=[s[r],s[e]],A(s)};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(n(),{href:"/projects/".concat(d,"/leads/forms"),className:"p-2 hover:bg-white/10 rounded-md transition-colors",children:(0,r.jsx)(p.A,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight text-white",children:"Novo Formul\xe1rio"}),(0,r.jsx)("p",{className:"text-white/60",children:"Configure os campos e estilo do formul\xe1rio"})]})]}),(0,r.jsxs)("form",{onSubmit:e=>(e.preventDefault(),q(null),x.trim())?0===u.length?void q("Adicione pelo menos um campo ao formul\xe1rio"):void D.mutate({name:x,fields:u,styling:E,redirectUrl:S||void 0}):void q("Nome do formul\xe1rio \xe9 obrigat\xf3rio"),className:"space-y-6",children:[O&&(0,r.jsx)("div",{className:"rounded-md bg-red-500/10 p-3 text-sm text-red-400",children:O}),(0,r.jsxs)("div",{className:"rounded-lg border border-white/10 bg-transparent p-4",children:[(0,r.jsx)("label",{htmlFor:"formName",className:"text-sm font-medium text-white",children:"Nome do Formul\xe1rio"}),(0,r.jsx)("input",{id:"formName",type:"text",value:x,onChange:e=>h(e.target.value),className:"mt-2 flex h-10 w-full rounded-md border border-white/20 bg-white/5 px-3 py-2 text-sm text-white placeholder:text-white/40",placeholder:"Ex: Formul\xe1rio de Contato",required:!0})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-white/10 bg-transparent",children:[(0,r.jsx)("div",{className:"flex items-center justify-between border-b border-white/10 p-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-semibold text-white",children:"Campos do Formul\xe1rio"}),(0,r.jsx)("p",{className:"text-sm text-white/60",children:"Arraste para reordenar os campos"})]})}),(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[u.map((e,t)=>{var s;let a=y[e.type];return(0,r.jsxs)("div",{className:"flex items-start gap-4 rounded-lg border border-white/10 p-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,r.jsx)("button",{type:"button",onClick:()=>I(t,"up"),disabled:0===t,className:"p-1 hover:bg-white/10 rounded disabled:opacity-30 text-white",children:(0,r.jsx)(b.A,{className:"h-4 w-4"})}),(0,r.jsx)(w.A,{className:"h-4 w-4 text-white/60"}),(0,r.jsx)("button",{type:"button",onClick:()=>I(t,"down"),disabled:t===u.length-1,className:"p-1 hover:bg-white/10 rounded disabled:opacity-30 text-white",children:(0,r.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-white/5",children:(0,r.jsx)(a,{className:"h-5 w-5 text-white/60"})}),(0,r.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,r.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs text-white/60",children:"Nome do campo (sem espa\xe7os)"}),(0,r.jsx)("input",{type:"text",value:e.name,onChange:e=>J(t,{name:e.target.value.replace(/\s/g,"_")}),className:"mt-1 flex h-9 w-full rounded-md border border-white/20 bg-white/5 px-3 py-1 text-sm text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs text-white/60",children:"Label (exibido ao usu\xe1rio)"}),(0,r.jsx)("input",{type:"text",value:e.label,onChange:e=>J(t,{label:e.target.value}),className:"mt-1 flex h-9 w-full rounded-md border border-white/20 bg-white/5 px-3 py-1 text-sm text-white"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm text-white",children:[(0,r.jsx)("input",{type:"checkbox",checked:e.required,onChange:e=>J(t,{required:e.target.checked}),className:"rounded border-white/20"}),"Campo obrigat\xf3rio"]}),(0,r.jsxs)("span",{className:"text-xs text-white/60",children:["Tipo: ",C[e.type]]})]}),"select"===e.type&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs text-white/60",children:"Op\xe7\xf5es (uma por linha)"}),(0,r.jsx)("textarea",{value:(null==(s=e.options)?void 0:s.join("\n"))||"",onChange:e=>J(t,{options:e.target.value.split("\n").filter(Boolean)}),rows:3,className:"mt-1 flex w-full rounded-md border border-white/20 bg-white/5 px-3 py-2 text-sm text-white"})]})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{A(u.filter((e,s)=>s!==t))},className:"p-2 text-red-400 hover:bg-red-500/10 rounded-md",children:(0,r.jsx)(j.A,{className:"h-4 w-4"})})]},t)}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-white/10",children:[(0,r.jsx)("span",{className:"text-sm text-white/60 mr-2",children:"Adicionar campo:"}),Object.keys(y).map(e=>{let t=y[e];return(0,r.jsxs)("button",{type:"button",onClick:()=>(e=>{let t="email"===e?"email":"phone"===e?"phone":"field_".concat(u.length+1);A([...u,{name:t,label:"email"===e?"E-mail":"phone"===e?"Telefone":"textarea"===e?"Mensagem":"Campo",type:e,required:!1,options:"select"===e?["Op\xe7\xe3o 1","Op\xe7\xe3o 2"]:void 0}])})(e),className:"inline-flex items-center rounded-md border border-white/20 px-3 py-1.5 text-sm text-white hover:bg-white/10",children:[(0,r.jsx)(t,{className:"mr-2 h-4 w-4"}),C[e]]},e)})]})]})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-white/10 bg-transparent",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>P(!_),className:"flex w-full items-center justify-between p-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-semibold text-left text-white",children:"Personaliza\xe7\xe3o"}),(0,r.jsx)("p",{className:"text-sm text-white/60",children:"Cores e mensagens do formul\xe1rio"})]}),_?(0,r.jsx)(b.A,{className:"h-5 w-5 text-white"}):(0,r.jsx)(g.A,{className:"h-5 w-5 text-white"})]}),_&&(0,r.jsxs)("div",{className:"border-t border-white/10 p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white",children:"Cor principal"}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,r.jsx)("input",{type:"color",value:E.primaryColor,onChange:e=>F({...E,primaryColor:e.target.value}),className:"h-10 w-14 rounded border border-white/20 cursor-pointer"}),(0,r.jsx)("input",{type:"text",value:E.primaryColor,onChange:e=>F({...E,primaryColor:e.target.value}),className:"flex h-10 flex-1 rounded-md border border-white/20 bg-white/5 px-3 py-2 text-sm text-white"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white",children:"Cor de fundo"}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,r.jsx)("input",{type:"color",value:E.backgroundColor,onChange:e=>F({...E,backgroundColor:e.target.value}),className:"h-10 w-14 rounded border border-white/20 cursor-pointer"}),(0,r.jsx)("input",{type:"text",value:E.backgroundColor,onChange:e=>F({...E,backgroundColor:e.target.value}),className:"flex h-10 flex-1 rounded-md border border-white/20 bg-white/5 px-3 py-2 text-sm text-white"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white",children:"Cor do texto"}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,r.jsx)("input",{type:"color",value:E.textColor,onChange:e=>F({...E,textColor:e.target.value}),className:"h-10 w-14 rounded border border-white/20 cursor-pointer"}),(0,r.jsx)("input",{type:"text",value:E.textColor,onChange:e=>F({...E,textColor:e.target.value}),className:"flex h-10 flex-1 rounded-md border border-white/20 bg-white/5 px-3 py-2 text-sm text-white"})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white",children:"Texto do bot\xe3o"}),(0,r.jsx)("input",{type:"text",value:E.buttonText,onChange:e=>F({...E,buttonText:e.target.value}),className:"mt-2 flex h-10 w-full rounded-md border border-white/20 bg-white/5 px-3 py-2 text-sm text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white",children:"URL de redirecionamento"}),(0,r.jsx)("input",{type:"url",value:S,onChange:e=>T(e.target.value),placeholder:"https://seu-site.com/obrigado",className:"mt-2 flex h-10 w-full rounded-md border border-white/20 bg-white/5 px-3 py-2 text-sm text-white placeholder:text-white/40"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white",children:"Mensagem de sucesso"}),(0,r.jsx)("input",{type:"text",value:E.successMessage,onChange:e=>F({...E,successMessage:e.target.value}),className:"mt-2 flex h-10 w-full rounded-md border border-white/20 bg-white/5 px-3 py-2 text-sm text-white"})]})]})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-white/10 bg-transparent",children:[(0,r.jsx)("div",{className:"border-b border-white/10 p-4",children:(0,r.jsx)("h2",{className:"font-semibold text-white",children:"Preview"})}),(0,r.jsx)("div",{className:"p-8 flex justify-center",children:(0,r.jsx)("div",{className:"w-full max-w-md rounded-lg p-6",style:{backgroundColor:E.backgroundColor,color:E.textColor},children:(0,r.jsxs)("div",{className:"space-y-4",children:[u.map(e=>{var t;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-1",children:[e.label,e.required&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"textarea"===e.type?(0,r.jsx)("textarea",{disabled:!0,rows:3,className:"w-full rounded border px-3 py-2 text-sm bg-white/10",placeholder:"Digite ".concat(e.label.toLowerCase())}):"select"===e.type?(0,r.jsxs)("select",{disabled:!0,className:"w-full rounded border px-3 py-2 text-sm bg-white/10",children:[(0,r.jsx)("option",{children:"Selecione..."}),null==(t=e.options)?void 0:t.map(e=>(0,r.jsx)("option",{children:e},e))]}):(0,r.jsx)("input",{type:e.type,disabled:!0,className:"w-full rounded border px-3 py-2 text-sm bg-white/10",placeholder:"email"===e.type?"exemplo@email.com":"phone"===e.type?"(11) 99999-9999":"Digite ".concat(e.label.toLowerCase())})]},e.name)}),(0,r.jsx)("button",{type:"button",disabled:!0,className:"w-full rounded-md py-2 text-sm font-medium text-white",style:{backgroundColor:E.primaryColor},children:E.buttonText})]})})})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)(n(),{href:"/projects/".concat(d,"/leads/forms"),className:"px-4 py-2 text-sm font-medium text-white hover:bg-white/10 rounded-md",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",disabled:D.isPending,className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50",children:D.isPending?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Criar Formul\xe1rio"]})})]})]})]})}},8061:(e,t,s)=>{"use strict";s.d(t,{g:()=>l});var r=s(3603);let a="trackpro_auth";function l(){let e=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=function(){let e=localStorage.getItem(a);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}(),r={"Content-Type":"application/json",...t.headers};s&&(r.Authorization="Bearer ".concat(s.accessToken));let l=await fetch("".concat("http://localhost:3001").concat(e),{...t,headers:r});if(!l.ok){let e=await l.json().catch(()=>({}));throw 401===l.status&&(localStorage.removeItem(a),window.location.pathname.includes("/login")||(window.location.href="/login")),Error(e.message||"Request failed: ".concat(l.status))}return 204===l.status?{}:l.json()},[]),t=(0,r.useCallback)(t=>e(t,{method:"GET"}),[e]),s=(0,r.useCallback)((t,s)=>e(t,{method:"POST",body:s?JSON.stringify(s):void 0}),[e]),l=(0,r.useCallback)((t,s)=>e(t,{method:"PUT",body:s?JSON.stringify(s):void 0}),[e]),o=(0,r.useCallback)((t,s)=>e(t,{method:"DELETE",body:s?JSON.stringify(s):void 0}),[e]);return{request:e,get:t,post:s,put:l,del:o}}},8296:(e,t,s)=>{Promise.resolve().then(s.bind(s,7289))}},e=>{e.O(0,[5803,2198,528,9769,6438,2453,7358],()=>e(e.s=8296)),_N_E=e.O()}]);
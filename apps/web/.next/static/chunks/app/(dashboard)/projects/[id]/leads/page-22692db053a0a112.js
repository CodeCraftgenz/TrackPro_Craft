(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5697],{3007:(e,t,s)=>{Promise.resolve().then(s.bind(s,6256))},6256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E});var a=s(8307),r=s(3603),i=s(4844),n=s(997),c=s(5384),l=s(328),o=s(5803),d=s.n(o),m=s(7778),x=s(7154),h=s(3686),u=s(8327),p=s(8743),j=s(1246),f=s(6510),b=s(292),g=s(5381),w=s(9418),N=s(2151),v=s(8166),y=s(3543),k=s(6632),A=s(8061);let C={FACEBOOK:{name:"Facebook Lead Ads",description:"Capture leads diretamente dos an\xfancios do Facebook",icon:m.A,color:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400"},INSTAGRAM:{name:"Instagram Lead Ads",description:"Capture leads dos an\xfancios do Instagram",icon:x.A,color:"bg-pink-100 dark:bg-pink-900/30",iconColor:"text-pink-600 dark:text-pink-400"},TWITTER:{name:"Twitter Lead Generation",description:"Capture leads do Twitter Ads",icon:h.A,color:"bg-sky-100 dark:bg-sky-900/30",iconColor:"text-sky-600 dark:text-sky-400"},WEBSITE:{name:"Formul\xe1rio do Site",description:"Crie formul\xe1rios personalizados para seu site",icon:u.A,color:"bg-green-100 dark:bg-green-900/30",iconColor:"text-green-600 dark:text-green-400"}};function E(){var e;let t=(0,i.useParams)().id,{get:s,post:o}=(0,A.g)(),x=(0,n.jE)(),[h,u]=(0,r.useState)(null),{data:E}=(0,c.I)({queryKey:["tenants"],queryFn:()=>s("/api/v1/tenants")}),T=null==E||null==(e=E[0])?void 0:e.id,{data:F,isLoading:I}=(0,c.I)({queryKey:["lead-integrations",T,t],queryFn:()=>s("/api/v1/tenants/".concat(T,"/projects/").concat(t,"/leads/integrations")),enabled:!!T}),{data:S,isLoading:O}=(0,c.I)({queryKey:["lead-forms",T,t],queryFn:()=>s("/api/v1/tenants/".concat(T,"/projects/").concat(t,"/leads/forms")),enabled:!!T}),R=(0,l.n)({mutationFn:()=>s("/api/v1/tenants/".concat(T,"/projects/").concat(t,"/leads/integrations/facebook/oauth-url")),onSuccess:e=>{window.location.href=e.url}}),L=(0,l.n)({mutationFn:()=>o("/api/v1/tenants/".concat(T,"/projects/").concat(t,"/leads/integrations/facebook/sync"),{}),onSuccess:()=>{x.invalidateQueries({queryKey:["lead-integrations",T,t]})}}),P=e=>null==F?void 0:F.find(t=>t.platform===e);return I||O?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"h-8 w-48 animate-pulse rounded bg-white/10"}),(0,a.jsx)("div",{className:"h-64 animate-pulse rounded-lg bg-white/10"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(d(),{href:"/projects/".concat(t,"/settings"),className:"p-2 hover:bg-white/10 rounded-md transition-colors",children:(0,a.jsx)(p.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold tracking-tight text-white",children:"Captura de Leads"}),(0,a.jsx)("p",{className:"text-white/60",children:"Configure integra\xe7\xf5es e formul\xe1rios para captura de leads"})]})]}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(C).map(e=>{let[s,r]=e,i=P(s),n=r.icon;return(0,a.jsxs)("div",{className:"rounded-lg border border-white/10 bg-transparent overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-white/10 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg ".concat(r.color),children:(0,a.jsx)(n,{className:"h-5 w-5 ".concat(r.iconColor)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-semibold text-white",children:r.name}),(0,a.jsx)("p",{className:"text-sm text-white/60",children:r.description})]})]}),i&&(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ".concat("ACTIVE"===i.status?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"ERROR"===i.status?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"),children:["ACTIVE"===i.status&&(0,a.jsx)(j.A,{className:"mr-1 h-3 w-3"}),"ERROR"===i.status&&(0,a.jsx)(f.A,{className:"mr-1 h-3 w-3"}),"ACTIVE"===i.status?"Conectado":"ERROR"===i.status?"Erro":"Pendente"]})})]}),(0,a.jsxs)("div",{className:"p-4",children:["FACEBOOK"===s&&(0,a.jsx)(a.Fragment,{children:i?(0,a.jsxs)("div",{className:"space-y-4",children:[i.pageName&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"P\xe1gina conectada"}),(0,a.jsx)("p",{className:"font-medium text-white",children:i.pageName})]}),i.formIds&&i.formIds.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Formul\xe1rios ativos"}),(0,a.jsxs)("p",{className:"font-medium text-white",children:[i.formIds.length," formul\xe1rio(s)"]})]}),i.lastSyncAt&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"\xdaltima sincroniza\xe7\xe3o"}),(0,a.jsx)("p",{className:"font-medium text-white",children:new Date(i.lastSyncAt).toLocaleString("pt-BR")})]}),i.errorMessage&&(0,a.jsxs)("div",{className:"flex items-start space-x-2 rounded-md bg-red-100 dark:bg-red-900/30 p-3",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 text-red-600 dark:text-red-400 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300",children:i.errorMessage})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsxs)("button",{onClick:()=>L.mutate(),disabled:L.isPending,className:"inline-flex items-center justify-center rounded-md border border-white/20 px-3 py-1.5 text-sm font-medium text-white hover:bg-white/10 disabled:opacity-50",children:[L.isPending?(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Sincronizar"]}),(0,a.jsxs)(d(),{href:"/projects/".concat(t,"/leads/facebook"),className:"inline-flex items-center justify-center rounded-md border border-white/20 px-3 py-1.5 text-sm font-medium text-white hover:bg-white/10",children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Configurar"]})]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-white/60 mb-4",children:"Conecte sua conta do Facebook para receber leads automaticamente"}),(0,a.jsxs)("button",{onClick:()=>R.mutate(),disabled:R.isPending,className:"inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:[R.isPending?(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Conectar Facebook"]})]})}),"INSTAGRAM"===s&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-white/60 mb-2",children:"A integra\xe7\xe3o com Instagram Lead Ads usa a mesma conex\xe3o do Facebook"}),P("FACEBOOK")?(0,a.jsxs)("span",{className:"inline-flex items-center text-sm text-green-400",children:[(0,a.jsx)(j.A,{className:"mr-1 h-4 w-4"})," Dispon\xedvel"]}):(0,a.jsx)("span",{className:"text-sm text-white/60",children:"Conecte o Facebook primeiro"})]}),"TWITTER"===s&&(0,a.jsx)("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Integra\xe7\xe3o com Twitter Lead Generation em breve"})}),"WEBSITE"===s&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-white/60 mb-4",children:"Crie formul\xe1rios personalizados para capturar leads do seu site"}),(0,a.jsxs)(d(),{href:"/projects/".concat(t,"/leads/forms"),className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90",children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Gerenciar Formul\xe1rios"]})]})]})]},s)})}),S&&S.length>0&&(0,a.jsxs)("div",{className:"rounded-lg border border-white/10 bg-transparent",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-white/10 p-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-semibold text-white",children:"Formul\xe1rios do Site"}),(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Formul\xe1rios ativos para captura de leads"})]}),(0,a.jsxs)(d(),{href:"/projects/".concat(t,"/leads/forms/new"),className:"inline-flex items-center justify-center rounded-md bg-primary px-3 py-1.5 text-sm font-medium text-primary-foreground hover:bg-primary/90",children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Novo Formul\xe1rio"]})]}),(0,a.jsx)("div",{className:"divide-y divide-white/10",children:S.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-white",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-white/60",children:[e.fields.length," campo(s) - ",e.enabled?"Ativo":"Inativo"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{var t,s;return t=e.embedCode,s=e.id,void(navigator.clipboard.writeText(t),u(s),setTimeout(()=>u(null),2e3))},className:"inline-flex items-center justify-center rounded-md border border-white/20 px-3 py-1.5 text-sm font-medium text-white hover:bg-white/10",children:h===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4 text-green-400"}),"Copiado!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Copiar C\xf3digo"]})}),(0,a.jsxs)(d(),{href:"/projects/".concat(t,"/leads/forms/").concat(e.id),className:"inline-flex items-center justify-center rounded-md border border-white/20 px-3 py-1.5 text-sm font-medium text-white hover:bg-white/10",children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Editar"]})]})]},e.id))})]}),(0,a.jsxs)(d(),{href:"/projects/".concat(t,"/leads/reports"),className:"flex items-center justify-between rounded-lg border border-white/10 bg-transparent p-4 hover:bg-white/5 transition-colors",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:"Relat\xf3rios de Leads"}),(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Visualize estat\xedsticas e hist\xf3rico de leads capturados"})]}),(0,a.jsx)(k.A,{className:"h-5 w-5 text-white/60"})]})]})}},8061:(e,t,s)=>{"use strict";s.d(t,{g:()=>i});var a=s(3603);let r="trackpro_auth";function i(){let e=(0,a.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=function(){let e=localStorage.getItem(r);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}(),a={"Content-Type":"application/json",...t.headers};s&&(a.Authorization="Bearer ".concat(s.accessToken));let i=await fetch("".concat("http://localhost:3001").concat(e),{...t,headers:a});if(!i.ok){let e=await i.json().catch(()=>({}));throw 401===i.status&&(localStorage.removeItem(r),window.location.pathname.includes("/login")||(window.location.href="/login")),Error(e.message||"Request failed: ".concat(i.status))}return 204===i.status?{}:i.json()},[]),t=(0,a.useCallback)(t=>e(t,{method:"GET"}),[e]),s=(0,a.useCallback)((t,s)=>e(t,{method:"POST",body:s?JSON.stringify(s):void 0}),[e]),i=(0,a.useCallback)((t,s)=>e(t,{method:"PUT",body:s?JSON.stringify(s):void 0}),[e]),n=(0,a.useCallback)((t,s)=>e(t,{method:"DELETE",body:s?JSON.stringify(s):void 0}),[e]);return{request:e,get:t,post:s,put:i,del:n}}}},e=>{e.O(0,[5803,2198,528,6776,6438,2453,7358],()=>e(e.s=3007)),_N_E=e.O()}]);
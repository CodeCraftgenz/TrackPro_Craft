(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3013],{287:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1319:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},2454:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(8307),n=s(3603),r=s(4844),l=s(5384),d=s(8743),c=s(9418),i=s(7911),o=s(1319),m=s(4427),u=s(287),x=s(3947);let h=(0,s(3161).A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var p=s(3686),v=s(5803),f=s.n(v),g=s(8061);function j(){var e,t,s,v;let j=(0,r.useParams)().id,{get:y}=(0,g.g)(),[N,b]=(0,n.useState)(()=>{let e=new Date;return e.setDate(e.getDate()-30),e.toISOString().split("T")[0]}),[k,w]=(0,n.useState)(()=>new Date().toISOString().split("T")[0]),{data:A}=(0,l.I)({queryKey:["tenants"],queryFn:()=>y("/api/v1/tenants")}),S=null==A||null==(e=A[0])?void 0:e.id,{data:M,isLoading:C,refetch:E,isFetching:T}=(0,l.I)({queryKey:["overview-report",S,j,N,k],queryFn:()=>y("/api/v1/tenants/".concat(S,"/projects/").concat(j,"/reports/overview?startDate=").concat(N,"&endDate=").concat(k)),enabled:!!S}),P=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString("pt-BR"),D=Math.max(...(null==M||null==(t=M.eventsByDay)?void 0:t.map(e=>e.count))||[1]);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(f(),{href:"/projects/".concat(j),className:"p-2 hover:bg-accent rounded-md transition-colors",children:(0,a.jsx)(d.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Vis\xe3o Geral"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"M\xe9tricas e estat\xedsticas do seu projeto"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("button",{onClick:()=>E(),disabled:T,className:"inline-flex items-center justify-center rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent disabled:opacity-50",children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 ".concat(T?"animate-spin":"")}),"Atualizar"]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(f(),{href:"/projects/".concat(j,"/reports"),className:"inline-flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),"Vis\xe3o Geral"]}),(0,a.jsxs)(f(),{href:"/projects/".concat(j,"/reports/funnel"),className:"inline-flex items-center gap-2 rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),"Funil"]}),(0,a.jsxs)(f(),{href:"/projects/".concat(j,"/reports/performance"),className:"inline-flex items-center gap-2 rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),"Performance"]}),(0,a.jsxs)(f(),{href:"/projects/".concat(j,"/reports/quality"),className:"inline-flex items-center gap-2 rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),"Qualidade"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 rounded-lg border bg-card p-4",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"date",value:N,onChange:e=>b(e.target.value),className:"h-9 rounded-md border border-input bg-background px-3 py-1 text-sm"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"at\xe9"}),(0,a.jsx)("input",{type:"date",value:k,onChange:e=>w(e.target.value),className:"h-9 rounded-md border border-input bg-background px-3 py-1 text-sm"})]})]}),C?(0,a.jsxs)("div",{className:"p-8 flex flex-col items-center justify-center",children:[(0,a.jsx)(c.A,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,a.jsx)("p",{className:"mt-4 text-sm text-muted-foreground",children:"Carregando relat\xf3rio..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total de Eventos"}),(0,a.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold",children:P((null==M?void 0:M.totalEvents)||0)}),(0,a.jsxs)("div",{className:"mt-1 flex items-center gap-1 text-sm",children:[((null==M?void 0:M.eventsTrend)||0)>=0?(0,a.jsx)(m.A,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(h,{className:"h-4 w-4 text-red-500"}),(0,a.jsxs)("span",{className:((null==M?void 0:M.eventsTrend)||0)>=0?"text-green-600":"text-red-600",children:[(null==M?void 0:M.eventsTrend)||0,"%"]}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"vs per\xedodo anterior"})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Usu\xe1rios \xdanicos"}),(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold",children:P((null==M?void 0:M.uniqueUsers)||0)})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sess\xf5es \xdanicas"}),(0,a.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold",children:P((null==M?void 0:M.uniqueSessions)||0)})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Eventos Hoje"}),(0,a.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-semibold",children:P((null==M?void 0:M.eventsToday)||0)})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Eventos por Dia"}),(0,a.jsx)("div",{className:"mt-4 h-48 flex items-end gap-1",children:null==M||null==(s=M.eventsByDay)?void 0:s.map((e,t)=>(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",children:[(0,a.jsx)("div",{className:"w-full bg-primary/80 hover:bg-primary rounded-t transition-colors",style:{height:"".concat(e.count/D*100,"%"),minHeight:e.count>0?"4px":"0"},title:"".concat(e.date,": ").concat(e.count.toLocaleString("pt-BR")," eventos")}),t%5==0&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(e.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})})]},e.date))})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Top Eventos"}),(0,a.jsx)("div",{className:"mt-4 space-y-3",children:null==M||null==(v=M.topEvents)?void 0:v.map(e=>{var t;let s=(null==(t=M.topEvents[0])?void 0:t.count)||1,n=e.count/s*100;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:e.event_name}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e.count.toLocaleString("pt-BR")})]}),(0,a.jsx)("div",{className:"h-2 w-full rounded-full bg-muted",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:"".concat(n,"%")}})})]},e.event_name)})})]})]})]})}},3686:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3947:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},4427:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},4844:(e,t,s)=>{"use strict";var a=s(5340);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7911:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},8061:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var a=s(3603);let n="trackpro_auth";function r(){let e=(0,a.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=function(){let e=localStorage.getItem(n);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}(),a={"Content-Type":"application/json",...t.headers};s&&(a.Authorization="Bearer ".concat(s.accessToken));let r=await fetch("".concat("http://localhost:3001").concat(e),{...t,headers:a});if(!r.ok){let e=await r.json().catch(()=>({}));throw 401===r.status&&(localStorage.removeItem(n),window.location.pathname.includes("/login")||(window.location.href="/login")),Error(e.message||"Request failed: ".concat(r.status))}return 204===r.status?{}:r.json()},[]),t=(0,a.useCallback)(t=>e(t,{method:"GET"}),[e]),s=(0,a.useCallback)((t,s)=>e(t,{method:"POST",body:s?JSON.stringify(s):void 0}),[e]),r=(0,a.useCallback)((t,s)=>e(t,{method:"PUT",body:s?JSON.stringify(s):void 0}),[e]),l=(0,a.useCallback)((t,s)=>e(t,{method:"DELETE",body:s?JSON.stringify(s):void 0}),[e]);return{request:e,get:t,post:s,put:r,del:l}}},8743:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9199:(e,t,s)=>{Promise.resolve().then(s.bind(s,2454))},9418:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}},e=>{e.O(0,[5803,2198,528,6438,2453,7358],()=>e(e.s=9199)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4583],{287:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},760:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1319:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},4427:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},4520:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},4844:(e,t,s)=>{"use strict";var a=s(5340);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},5293:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},5381:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},6008:(e,t,s)=>{Promise.resolve().then(s.bind(s,9950))},7911:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},8061:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var a=s(3603);let l="trackpro_auth";function r(){let e=(0,a.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=function(){let e=localStorage.getItem(l);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}(),a={"Content-Type":"application/json",...t.headers};s&&(a.Authorization="Bearer ".concat(s.accessToken));let r=await fetch("".concat("http://localhost:3001").concat(e),{...t,headers:a});if(!r.ok){let e=await r.json().catch(()=>({}));throw 401===r.status&&(localStorage.removeItem(l),window.location.pathname.includes("/login")||(window.location.href="/login")),Error(e.message||"Request failed: ".concat(r.status))}return 204===r.status?{}:r.json()},[]),t=(0,a.useCallback)(t=>e(t,{method:"GET"}),[e]),s=(0,a.useCallback)((t,s)=>e(t,{method:"POST",body:s?JSON.stringify(s):void 0}),[e]),r=(0,a.useCallback)((t,s)=>e(t,{method:"PUT",body:s?JSON.stringify(s):void 0}),[e]),d=(0,a.useCallback)((t,s)=>e(t,{method:"DELETE",body:s?JSON.stringify(s):void 0}),[e]);return{request:e,get:t,post:s,put:r,del:d}}},8743:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9418:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},9915:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3161).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},9950:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(8307),l=s(4844),r=s(5384),d=s(8743),n=s(9418),i=s(7911),c=s(1319),o=s(4427),m=s(287),x=s(4520);let u=(0,s(3161).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var h=s(9915),p=s(5293),g=s(760),v=s(5381),j=s(5803),f=s.n(j),y=s(8061);function N(){var e,t,s;let j=(0,l.useParams)().id,{get:N}=(0,y.g)(),{data:b}=(0,r.I)({queryKey:["tenants"],queryFn:()=>N("/api/v1/tenants")}),k=null==b||null==(e=b[0])?void 0:e.id,{data:A,isLoading:w,refetch:C,isFetching:M}=(0,r.I)({queryKey:["quality-report",k,j],queryFn:()=>N("/api/v1/tenants/".concat(k,"/projects/").concat(j,"/reports/quality")),enabled:!!k,refetchInterval:3e4}),E=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString("pt-BR"),R=e=>e>=95?"text-green-600":e>=80?"text-yellow-600":"text-red-600",T=e=>e>=95?"bg-green-100 dark:bg-green-900/30":e>=80?"bg-yellow-100 dark:bg-yellow-900/30":"bg-red-100 dark:bg-red-900/30";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(f(),{href:"/projects/".concat(j),className:"p-2 hover:bg-accent rounded-md transition-colors",children:(0,a.jsx)(d.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Qualidade dos Dados"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Monitoramento da qualidade e integridade dos eventos"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("button",{onClick:()=>C(),disabled:M,className:"inline-flex items-center justify-center rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent disabled:opacity-50",children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4 ".concat(M?"animate-spin":"")}),"Atualizar"]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(f(),{href:"/projects/".concat(j,"/reports"),className:"inline-flex items-center gap-2 rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),"Vis\xe3o Geral"]}),(0,a.jsxs)(f(),{href:"/projects/".concat(j,"/reports/funnel"),className:"inline-flex items-center gap-2 rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),"Funil"]}),(0,a.jsxs)(f(),{href:"/projects/".concat(j,"/reports/performance"),className:"inline-flex items-center gap-2 rounded-md border px-4 py-2 text-sm font-medium hover:bg-accent",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),"Performance"]}),(0,a.jsxs)(f(),{href:"/projects/".concat(j,"/reports/quality"),className:"inline-flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),"Qualidade"]})]}),w?(0,a.jsxs)("div",{className:"p-8 flex flex-col items-center justify-center",children:[(0,a.jsx)(n.A,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,a.jsx)("p",{className:"mt-4 text-sm text-muted-foreground",children:"Carregando qualidade..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("h3",{className:"font-semibold",children:"Valida\xe7\xe3o de Eventos"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"(\xfaltimas 24h)"})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Recebido"}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-semibold",children:E((null==A?void 0:A.eventValidation.total)||0)})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"V\xe1lidos"})]}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-semibold text-green-600",children:E((null==A?void 0:A.eventValidation.valid)||0)})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Inv\xe1lidos"})]}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-semibold text-red-600",children:E((null==A?void 0:A.eventValidation.invalid)||0)})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat(T((null==A?void 0:A.eventValidation.validationRate)||100)),children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Taxa de Valida\xe7\xe3o"}),(0,a.jsxs)("p",{className:"mt-1 text-2xl font-semibold ".concat(R((null==A?void 0:A.eventValidation.validationRate)||100)),children:[(null==A?void 0:A.eventValidation.validationRate)||100,"%"]})]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-blue-500"}),(0,a.jsx)("h3",{className:"font-semibold",children:"Entrega Meta CAPI"})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-5",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Enviado"}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-semibold",children:E((null==A?void 0:A.metaDelivery.total)||0)})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Entregues"})]}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-semibold text-green-600",children:E((null==A?void 0:A.metaDelivery.delivered)||0)})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Falharam"})]}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-semibold text-red-600",children:E((null==A?void 0:A.metaDelivery.failed)||0)})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 text-yellow-500"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tentando"})]}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-semibold text-yellow-600",children:E((null==A?void 0:A.metaDelivery.retrying)||0)})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat(T((null==A?void 0:A.metaDelivery.deliveryRate)||100)),children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Taxa de Entrega"}),(0,a.jsxs)("p",{className:"mt-1 text-2xl font-semibold ".concat(R((null==A?void 0:A.metaDelivery.deliveryRate)||100)),children:[(null==A?void 0:A.metaDelivery.deliveryRate)||100,"%"]})]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(v.A,{className:"h-5 w-5 text-yellow-500"}),(0,a.jsx)("h3",{className:"font-semibold",children:"Erros Recentes"})]}),(null==A||null==(t=A.recentErrors)?void 0:t.length)?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"border-b bg-muted/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Tipo"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Mensagem"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-muted-foreground",children:"Ocorr\xeancias"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:null==A||null==(s=A.recentErrors)?void 0:s.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ".concat("validation"===e.type?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"integration"===e.type?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:e.type})}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:e.message}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-right font-medium",children:e.count})]},t))})]})}):(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)(u,{className:"h-12 w-12 mx-auto text-green-500/50"}),(0,a.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Nenhum erro recente encontrado"})]})]}),(0,a.jsx)("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4 dark:border-green-900 dark:bg-green-950",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(u,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-green-900 dark:text-green-100",children:"Status de Sa\xfade"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-green-800 dark:text-green-200",children:((null==A?void 0:A.eventValidation.validationRate)||100)>=95&&((null==A?void 0:A.metaDelivery.deliveryRate)||100)>=95?"Todos os sistemas est\xe3o operando normalmente. Taxa de valida\xe7\xe3o e entrega dentro dos par\xe2metros esperados.":"Alguns indicadores est\xe3o abaixo do esperado. Verifique os erros recentes para mais detalhes."})]})]})})]})]})}}},e=>{e.O(0,[5803,2198,528,6438,2453,7358],()=>e(e.s=6008)),_N_E=e.O()}]);